{% extends 'base.html.twig' %}

{% block title %}Users List{% endblock %}

{% block body %}

    <!-- MAIN CONTENT-->
    <div class="section__content section__content--p30">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <!-- USER DATA-->
                    <div class="user-data m-b-30">
                        <h3 class="title-3 m-b-30">
                            <i class="zmdi zmdi-account-calendar"></i>user data</h3>
                        <div class="filters m-b-45">
                            <div class="rs-select2--dark rs-select2--md m-r-10 rs-select2--border">
                                <select class="js-select2" name="property">
                                    <option selected="selected">All Properties</option>
                                    <option value="">Products</option>
                                    <option value="">Services</option>
                                </select>
                                <div class="dropDownSelect2"></div>
                            </div>
                            <div class="rs-select2--dark rs-select2--sm rs-select2--border">
                                <select class="js-select2 au-select-dark" name="time">
                                    <option selected="selected">All Time</option>
                                    <option value="">By Month</option>
                                    <option value="">By Day</option>
                                </select>
                                <div class="dropDownSelect2"></div>
                            </div>
                        </div>
                        <div class="table-responsive table-data">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <td>name</td>
                                        <td>role</td>
                                        <td>type</td>
                                        <td>active</td>
                                        <td>switch to</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for user in users %}
                                        <tr>
                                            <td>
                                                <div class="table-data__info">
                                                    <h6>{{ user.username }}</h6>
                                                    <span><a href="#">{{ user.email }}</a></span>
                                                </div>
                                            </td>
                                            <td>
                                                {% if user.roles[0] == "ROLE_ADMIN" %}
                                                    <span class="role admin">Admin</span>
                                                {% elseif user.roles[0] == "ROLE_SUPER_ADMIN" %}
                                                    <span class="role member">Super Admin</span>
                                                {% else %}
                                                    <span class="role user">User</span>
                                                {% endif %}
                                            </td>
                                            <td>
                                                <div class="table-data__info">
                                                    <h6>
                                                        {% if user.roles[0] == "ROLE_ADMIN" %}
                                                            administration
                                                        {% elseif user.roles[0] == "ROLE_SUPER_ADMIN" %}
                                                            Full Control
                                                        {% else  %}
                                                            Edition
                                                        {% endif %}
                                                    </h6>
                                                </div>
                                            </td>
                                            <td>
                                                <label class="switch switch-3d switch-success mr-3">
                                                    <input type="checkbox" value="{{ path('user_active', {'id': user.id}) }}" class="switch-input" {% if user.isValid == true %}checked="true"{% endif %} {% if not (is_granted('ROLE_SUPER_ADMIN') or is_granted('ROLE_ADMIN'))  %}disabled=""{% endif %}>
                                                    <span class="switch-label"></span>
                                                    <span class="switch-handle"></span>
                                                </label>
                                            </td>
                                            <td>
                                                {% if is_granted('ROLE_SUPER_ADMIN') and user != app.user %}
                                                    <a href="{{ path('index_default', {'_switch_user': user.email}) }}"><span class="more"><i class="zmdi zmdi-sign-in"></i></span></a>
                                                {% else %}
                                                    <div class="table-data__info"><span><a href="#">not allowed</a></span></div>
                                                {% endif %}
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <div class="user-data__footer">
                            <button class="au-btn au-btn-load">load more</button>
                        </div>
                    </div>
                    <!-- END USER DATA-->
                </div>
            </div>
        </div>
    </div>
{% endblock %}

